<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<title>PO System</title>
<style>
  body { font-family: Arial; margin:20px; }
  input, select { padding:6px; width:100%; margin:4px 0; }
  table { width:100%; border-collapse:collapse; margin-top:10px; }
  th, td { border:1px solid #ccc; padding:6px; }
  button { padding:8px 14px; margin:8px 0; }
  .section { border:1px solid #ddd; padding:15px; margin-bottom:20px; border-radius:8px; }
</style>
</head>
<body>
<h2>ðŸ“„ PURCHASE ORDER SYSTEM</h2>

<!-- ==================== 1. INFORMASI PERUSAHAAN ===================== -->
<div class="section">
  <h3>1. Informasi Perusahaan</h3>
  <label>Perusahaan</label><input id="perusahaan">
  <label>Alamat</label><input id="alamat">
  <label>Fax</label><input id="fax">
  <label>Melalui</label><input id="melalui">
  <label>Kontak Person</label><input id="kontak">
</div>

<!-- ==================== DATA JSON UNTUK KALIBRASI ===================== -->
<script>
const alatData = [
  {
    nama: "Multimeter Digital",
    lokasi: "Lab Kalibrasi A",
    akreditasi: "ISO 17025",
    kemampuan: "0 - 1000V",
    tarif: 150000
  },
  {
    nama: "Sound Level Meter",
    lokasi: "Lab Akustik",
    akreditasi: "KAN",
    kemampuan: "30 - 130 dB",
    tarif: 200000
  }
];
</script>

<!-- ==================== 2. ITEM PO (KALIBRASI) ===================== -->
<div class="section">
  <h3>2. Item PO (Alat yang Dikalibrasi)</h3>

  <button onclick="tambahBarisKalibrasi()">Tambah Item</button>

  <table id="tabelKalibrasi">
    <tr>
      <th>Nama Alat</th>
      <th>No Seri</th>
      <th>Qty</th>
      <th>Total Jam</th>
      <th>Harga</th>
      <th>Total</th>
      <th>Aksi</th>
    </tr>
  </table>
</div>

<!-- ==================== 3. ALAT NON-KALIBRASI ===================== -->
<div class="section">
  <h3>3. Alat Tidak Dapat Dikalibrasi</h3>
  <button onclick="tambahBarisNonKalibrasi()">Tambah Item</button>

  <table id="tabelNonKalibrasi">
    <tr>
      <th>Nama Alat</th>
      <th>No Seri</th>
      <th>Qty</th>
      <th>Keterangan</th>
      <th>Aksi</th>
    </tr>
  </table>
</div>

<!-- ==================== 4. BIAYA JASA KALIBRATOR ===================== -->
<div class="section">
  <h3>4. Biaya Jasa Kalibrator</h3>
  <button onclick="tambahBarisKalibrator()">Tambah Baris</button>

  <table id="tabelKalibrator">
    <tr>
      <th>Jumlah Orang</th>
      <th>Biaya per Orang</th>
      <th>Total</th>
      <th>Aksi</th>
    </tr>
  </table>
</div>

<script>

// ========== 2. TAMBAH ITEM KALIBRASI (DENGAN DROPDOWN OTOMATIS) ==========
function tambahBarisKalibrasi() {
  let table = document.getElementById("tabelKalibrasi");
  let row = table.insertRow();

  let dropdown = `<select onchange='isiOtomatis(this)'>
      <option value=''>-- pilih alat --</option>
      ${alatData.map((a,i)=>`<option value='${i}'>${a.nama}</option>`).join('')}
    </select>`;

  row.innerHTML = `
    <td>${dropdown}</td>
    <td contenteditable='true'></td>
    <td contenteditable='true'>1</td>
    <td contenteditable='true'>0</td>
    <td contenteditable='true'>0</td>
    <td contenteditable='false'>0</td>
    <td><button onclick='hapus(this)'>Hapus</button></td>
  `;
}

function isiOtomatis(sel) {
  if (sel.value === "") return;
  let data = alatData[sel.value];
  let tr = sel.parentElement.parentElement;

  tr.cells[1].innerText = "-";
  tr.cells[3].innerText = data.kemampuan;
  tr.cells[4].innerText = data.tarif;

  hitungTotal();
}

// Hitung otomatis total harga
function hitungTotal() {
  document.querySelectorAll('#tabelKalibrasi tr').forEach((tr,idx)=>{
    if (idx===0) return;
    let qty = parseFloat(tr.cells[2].innerText)||0;
    let harga = parseFloat(tr.cells[4].innerText)||0;
    tr.cells[5].innerText = qty * harga;
  });
}

// ========== 3. TAMBAH ITEM NON KALIBRASI (MANUAL) ==========
function tambahBarisNonKalibrasi() {
  let table = document.getElementById("tabelNonKalibrasi");
  let row = table.insertRow();

  row.innerHTML = `
    <td contenteditable='true'></td>
    <td contenteditable='true'></td>
    <td contenteditable='true'>1</td>
    <td contenteditable='true'></td>
    <td><button onclick='hapus(this)'>Hapus</button></td>
  `;
}

// ========== 4. BIAYA JASA KALIBRATOR ==========
function tambahBarisKalibrator() {
  let table = document.getElementById("tabelKalibrator");
  let row = table.insertRow();

  row.innerHTML = `
    <td contenteditable='true'>1</td>
    <td contenteditable='true'>0</td>
    <td contenteditable='false'>0</td>
    <td><button onclick='hapus(this)'>Hapus</button></td>
  `;

  row.addEventListener('input', ()=>{
    let qty = parseFloat(row.cells[0].innerText)||0;
    let biaya = parseFloat(row.cells[1].innerText)||0;
    row.cells[2].innerText = qty * biaya;
  });
}

// Hapus baris
function hapus(btn) {
  btn.parentElement.parentElement.remove();
}
</script>

</body>
</html>
